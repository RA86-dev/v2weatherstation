<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - Weather Station v2.0 Documentation</title>
    <meta name="description" content="Weather Station v2.0 Documentation">
    <meta name="generator" content="Weather Station Documentation Generator">
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/style.css">
    
    <!-- Syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAA==">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>Weather Station v2.0</h1>
            <p></p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <ul>
                <li><a href=index.html>Home</a></li><li><a href=installation.html>Installation</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h3>Table of Contents</h3>
            <div class="search">
                <input type="text" id="search" placeholder="Search documentation...">
            </div>
            <ul>
                <!-- Generated by JavaScript -->
            </ul>
        </aside>

        <!-- Content -->
        <div class="content">
            <h1>Weather Station v2.0 Documentation</h1>

<p><img src="https://img.shields.io/badge/Weather-Station-blue?style=for-the-badge" alt="Weather Station" title="" />
<img src="https://img.shields.io/badge/Python-3.11+-green?style=for-the-badge&amp;logo=python" alt="Python" title="" />
<img src="https://img.shields.io/badge/FastAPI-0.104+-red?style=for-the-badge&amp;logo=fastapi" alt="FastAPI" title="" />
<img src="https://img.shields.io/badge/Docker-Ready-blue?style=for-the-badge&amp;logo=docker" alt="Docker" title="" /></p>

<p>A modern, self-hosted weather data visualization platform with real-time data fetching from Open-Meteo API. Designed for schools and organizations to provide unified weather information access.</p>

<h2>Table of Contents</h2>

<ul>
<li><a href="#features">Features</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#api-documentation">API Documentation</a></li>
<li><a href="#usage-examples">Usage Examples</a></li>
<li><a href="#development">Development</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#contributing">Contributing</a></li>
</ul>

<h2>Features</h2>

<h3>âœ¨ Core Features</h3>

<ul>
<li><strong>ğŸ”´ Live Data Fetching</strong>: Real-time weather data from self-hosted Open-Meteo API</li>
<li><strong>ğŸš€ Instant Startup</strong>: No more 4+ minute initial data downloads</li>
<li><strong>ğŸŒ 240+ Locations</strong>: All US cities available immediately</li>
<li><strong>ğŸ“Š Multiple Data Sources</strong>: Historical, current, and forecast data</li>
<li><strong>ğŸ³ Dockerized</strong>: One-command deployment with Docker Compose</li>
<li><strong>âš¡ Fast Response</strong>: Sub-second data retrieval</li>
<li><strong>ğŸ”§ Configurable</strong>: Environment-based configuration</li>
</ul>

<h3>ğŸ¯ Web Interface Features</h3>

<ul>
<li>Beautiful, responsive web interface</li>
<li>Interactive weather maps and charts</li>
<li>Weather statistics and comparisons</li>
<li>Multiple visualization modes</li>
<li>Real-time data updates</li>
<li>Mobile-friendly design</li>
</ul>

<h3>ğŸ”Œ API Features</h3>

<ul>
<li>RESTful API for data access</li>
<li>Health monitoring and status endpoints</li>
<li>CORS support for web applications</li>
<li>Authentication for administrative operations</li>
<li>JSON responses with comprehensive metadata</li>
</ul>

<h2>Architecture</h2>

<p><code>
Weather Station v2.0
â”œâ”€â”€ FastAPI Backend (main.py)
â”‚   â”œâ”€â”€ Weather Station Core (WeatherStation/)
â”‚   â”‚   â”œâ”€â”€ Configuration Management (config.py)
â”‚   â”‚   â”œâ”€â”€ Data Manager (data_manager.py)
â”‚   â”‚   â”œâ”€â”€ Live Data Manager (live_data_manager.py)
â”‚   â”‚   â””â”€â”€ Web Server (index.py)
â”‚   â””â”€â”€ Assets &amp; Frontend (assets/)
â”œâ”€â”€ Docker Support
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ Docker Compose
â””â”€â”€ Installation Scripts
    â”œâ”€â”€ install-weatherstation.sh
    â””â”€â”€ init-weather-data.sh
</code></p>

<h3>Key Components</h3>

<ol>
<li><strong>FastAPI Application</strong>: High-performance async web framework</li>
<li><strong>Data Managers</strong>: Handle both live API data and cached file data</li>
<li><strong>Configuration System</strong>: Environment-based configuration with validation</li>
<li><strong>Web Interface</strong>: Responsive HTML/CSS/JS frontend</li>
<li><strong>API Layer</strong>: RESTful endpoints for data access</li>
</ol>

<h2>Installation</h2>

<h3>Quick Start with Docker (Recommended)</h3>

<p>```bash</p>

<h1>Clone the repository</h1>

<p>git clone https://github.com/RA86-dev/v2weatherstation
cd v2weatherstation</p>

<h1>Build and run with Docker</h1>

<p>docker build -t v2weatherstation:latest .
docker run -p 8110:8110 v2weatherstation:latest
```</p>

<h3>Manual Installation</h3>

<p>```bash</p>

<h1>Clone the repository</h1>

<p>git clone https://github.com/RA86-dev/v2weatherstation
cd v2weatherstation</p>

<h1>Install dependencies</h1>

<p>pip install -r requirements.txt</p>

<h1>Run the application</h1>

<p>python main.py
```</p>

<h3>Global Installation Script</h3>

<p>Use our enhanced installation script for system-wide installation:</p>

<p>```bash</p>

<h1>Download and run the installer</h1>

<p>curl -sSL https://raw.githubusercontent.com/RA86-dev/v2weatherstation/main/install-global.sh | bash</p>

<h1>Or manually download and run</h1>

<p>wget https://raw.githubusercontent.com/RA86-dev/v2weatherstation/main/install-global.sh
chmod +x install-global.sh
./install-global.sh
```</p>

<h2>Configuration</h2>

<h3>Environment Variables</h3>

<p>The application supports configuration through environment variables:</p>

<p>| Variable | Default | Description |
|----------|---------|-------------|
| <code>WS_HOST</code> | <code>0.0.0.0</code> | Server host address |
| <code>WS_PORT</code> | <code>8110</code> | Server port |
| <code>WS_DEBUG</code> | <code>False</code> | Enable debug mode |
| <code>WS_LIVE_DATA_ENABLED</code> | <code>True</code> | Enable live data fetching |
| <code>WS_USE_SELF_HOSTED</code> | <code>True</code> | Use self-hosted Open-Meteo API |
| <code>WS_OPEN_METEO_URL</code> | <code>http://localhost:8080/v1</code> | Open-Meteo API URL |
| <code>WS_API_KEY</code> | Auto-generated | API key for admin operations |
| <code>WS_LOG_LEVEL</code> | <code>INFO</code> | Logging level |
| <code>WS_CORS_ORIGINS</code> | <code>["*"]</code> | Allowed CORS origins |</p>

<h3>Configuration File</h3>

<p>Create a <code>.env</code> file in the project root:</p>

<p><code>env
WS_HOST=0.0.0.0
WS_PORT=8110
WS_DEBUG=False
WS_LIVE_DATA_ENABLED=True
WS_USE_SELF_HOSTED=True
WS_OPEN_METEO_URL=http://localhost:8080/v1
WS_LOG_LEVEL=INFO
</code></p>

<h2>API Documentation</h2>

<h3>Health &amp; Status Endpoints</h3>

<h4>GET /health</h4>

<p>Health check endpoint
<code>json
{
  "status": "healthy",
  "version": "2.0.0",
  "timestamp": "2025-01-01T00:00:00Z",
  "data_status": {...}
}
</code></p>

<h4>GET /api/status</h4>

<p>Comprehensive API status
<code>json
{
  "api_status": {...},
  "data_manager_status": {...},
  "live_data_enabled": true,
  "self_hosted": true,
  "timestamp": "2025-01-01T00:00:00Z"
}
</code></p>

<h3>Weather Data Endpoints</h3>

<h4>GET /api/data/weather?limit=300</h4>

<p>Get weather data for multiple locations
- <strong>Parameters</strong>: <code>limit</code> (1-300, default: 300)
- <strong>Returns</strong>: Weather data for requested number of locations</p>

<h4>GET /api/data/live/{city}</h4>

<p>Get live weather data for specific city
- <strong>Parameters</strong>: <code>city</code> (string)
- <strong>Returns</strong>: Real-time weather data for the city</p>

<h4>GET /api/data/current/{city}</h4>

<p>Get current conditions for specific city
- <strong>Parameters</strong>: <code>city</code> (string)
- <strong>Returns</strong>: Current weather conditions</p>

<h4>GET /api/data/locations</h4>

<p>Get list of available locations
<code>json
{
  "locations": ["New York", "Los Angeles", ...],
  "coordinates": {...},
  "total": 240,
  "timestamp": "2025-01-01T00:00:00Z"
}
</code></p>

<h3>Administrative Endpoints</h3>

<h4>POST /api/data/force-update</h4>

<p>Manually trigger data update (requires API key)
- <strong>Headers</strong>: <code>X-API-Key: your-api-key</code>
- <strong>Returns</strong>: Update status</p>

<h4>GET /admin/api-key (Debug mode only)</h4>

<p>Get API key for administrative operations</p>

<h4>GET /logs?limit=100 (Debug mode only)</h4>

<p>Get recent access logs</p>

<h3>Web Interface Endpoints</h3>

<ul>
<li><strong>GET /</strong>: Main dashboard</li>
<li><strong>GET /comparison</strong>: Weather comparison page</li>
<li><strong>GET /intmap</strong>: Interactive pressure map</li>
<li><strong>GET /weatherstat</strong>: Weather statistics</li>
<li><strong>GET /license</strong>: License information</li>
</ul>

<h2>Usage Examples</h2>

<h3>Fetching Weather Data</h3>

<p>```bash</p>

<h1>Get weather data for all locations</h1>

<p>curl http://localhost:8110/api/data/weather</p>

<h1>Get weather data for specific number of cities</h1>

<p>curl "http://localhost:8110/api/data/weather?limit=50"</p>

<h1>Get live data for New York</h1>

<p>curl http://localhost:8110/api/data/live/New%20York</p>

<h1>Get current conditions for Los Angeles</h1>

<p>curl http://localhost:8110/api/data/current/Los%20Angeles
```</p>

<h3>Administrative Operations</h3>

<p>```bash</p>

<h1>Get API key (debug mode only)</h1>

<p>curl http://localhost:8110/admin/api-key</p>

<h1>Force data update</h1>

<p>curl -X POST http://localhost:8110/api/data/force-update \
  -H "X-API-Key: your-api-key-here"</p>

<h1>Check API status</h1>

<p>curl http://localhost:8110/api/status
```</p>

<h3>Web Interface</h3>

<ul>
<li><strong>Dashboard</strong>: http://localhost:8110/</li>
<li><strong>Weather Comparison</strong>: http://localhost:8110/comparison</li>
<li><strong>Interactive Map</strong>: http://localhost:8110/intmap</li>
<li><strong>Statistics</strong>: http://localhost:8110/weatherstat</li>
</ul>

<h2>Development</h2>

<h3>Project Structure</h3>

<p><code>
v2weatherstation/
â”œâ”€â”€ main.py                 # Application entry point
â”œâ”€â”€ WeatherStation/         # Core application
â”‚   â””â”€â”€ weather_station/
â”‚       â”œâ”€â”€ index.py        # FastAPI application
â”‚       â”œâ”€â”€ config.py       # Configuration management
â”‚       â”œâ”€â”€ data_manager.py # File-based data handling
â”‚       â”œâ”€â”€ live_data_manager.py # Live API data handling
â”‚       â””â”€â”€ assets/         # Static web assets
â”œâ”€â”€ docs/                   # Documentation
â”œâ”€â”€ testing/               # Test files
â”œâ”€â”€ requirements.txt       # Python dependencies
â”œâ”€â”€ Dockerfile            # Docker configuration
â””â”€â”€ install-*.sh          # Installation scripts
</code></p>

<h3>Running in Development Mode</h3>

<p>```bash</p>

<h1>Install development dependencies</h1>

<p>pip install -r requirements.txt</p>

<h1>Run with debug mode</h1>

<p>export WS_DEBUG=True
python main.py</p>

<h1>Or use uvicorn directly</h1>

<p>uvicorn WeatherStation.weather_station.index:app --reload --host 0.0.0.0 --port 8110
```</p>

<h3>Adding New Features</h3>

<ol>
<li><strong>Study existing patterns</strong> in the codebase</li>
<li><strong>Write tests first</strong> when possible</li>
<li><strong>Follow the configuration system</strong> for new settings</li>
<li><strong>Use the existing data managers</strong> for data access</li>
<li><strong>Maintain API consistency</strong> with existing endpoints</li>
</ol>

<h3>Code Quality</h3>

<ul>
<li>Follow PEP 8 style guidelines</li>
<li>Use type hints where appropriate</li>
<li>Write descriptive commit messages</li>
<li>Test your changes thoroughly</li>
<li>Update documentation for new features</li>
</ul>

<h2>Troubleshooting</h2>

<h3>Common Issues</h3>

<h4>Port Already in Use</h4>

<p>```bash</p>

<h1>Check what's using port 8110</h1>

<p>lsof -i :8110</p>

<h1>Kill the process</h1>

<p>kill -9 <PID>
```</p>

<h4>API Not Accessible</h4>

<ol>
<li>Check if Open-Meteo API is running</li>
<li>Verify <code>WS_OPEN_METEO_URL</code> configuration</li>
<li>Check network connectivity</li>
<li>Review application logs</li>
</ol>

<h4>Data Not Loading</h4>

<ol>
<li>Check <code>WS_LIVE_DATA_ENABLED</code> setting</li>
<li>Verify API key for manual updates</li>
<li>Check file permissions for data directory</li>
<li>Review data manager logs</li>
</ol>

<h4>Docker Issues</h4>

<p>```bash</p>

<h1>Rebuild the container</h1>

<p>docker build --no-cache -t v2weatherstation:latest .</p>

<h1>Check container logs</h1>

<p>docker logs <container-id></p>

<h1>Access container shell</h1>

<p>docker exec -it <container-id> /bin/bash
```</p>

<h3>Debug Mode</h3>

<p>Enable debug mode for detailed logging:</p>

<p><code>bash
export WS_DEBUG=True
python main.py
</code></p>

<p>Debug mode provides:
- Detailed request/response logging
- API key display
- Access log endpoint
- Enhanced error messages</p>

<h3>Log Files</h3>

<p>Application logs are written to stdout. In production, redirect to files:</p>

<p><code>bash
python main.py &gt; weatherstation.log 2&gt;&amp;1
</code></p>

<h2>Contributing</h2>

<h3>Getting Started</h3>

<ol>
<li>Fork the repository</li>
<li>Clone your fork</li>
<li>Create a feature branch</li>
<li>Make your changes</li>
<li>Test thoroughly</li>
<li>Submit a pull request</li>
</ol>

<h3>Development Guidelines</h3>

<ul>
<li>Follow the existing code style</li>
<li>Write tests for new features</li>
<li>Update documentation</li>
<li>Use descriptive commit messages</li>
<li>Keep changes focused and atomic</li>
</ul>

<h3>Reporting Issues</h3>

<p>When reporting issues, include:
- Weather Station version
- Operating system
- Python version
- Error messages
- Steps to reproduce
- Expected vs actual behavior</p>

<h2>License</h2>

<p>This project is licensed under the terms specified in the LICENSE file.</p>

<h2>Support</h2>

<p>For support and questions:
- Check the <a href="#troubleshooting">troubleshooting section</a>
- Review existing GitHub issues
- Create a new issue with detailed information</p>

<hr />

<p><strong>Weather Station v2.0</strong> - Modern weather data visualization for everyone.</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>Generated on Tue Aug 12 16:35:26 CDT 2025 | Weather Station v2.0 Documentation</p>
            <p><a href="https://github.com/RA86-dev/v2weatherstation">GitHub Repository</a></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/script.js"></script>
    <script>
        // Initialize syntax highlighting
        hljs.highlightAll();
    </script>
</body>
</html>
